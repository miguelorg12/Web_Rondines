# Validadores de Formularios - RondiTrack

## ğŸ“‹ DescripciÃ³n

Este archivo contiene validadores basados en expresiones regulares para todos los formularios de RondiTrack. Los validadores muestran errores en **rojo** y validan en tiempo real.

## ğŸš€ Uso BÃ¡sico

### 1. Importar los validadores

```typescript
import { validators } from '../utils/validators';
```

### 2. Usar ValidatedTextField

```typescript
import ValidatedTextField from '../components/common/ValidatedTextField';

// En tu componente
<ValidatedTextField
  label="Email"
  value={email}
  onChange={(value) => setEmail(value)}
  validator={validators.validateEmail}
  fullWidth
  required
/>
```

### 3. Validar formulario completo

```typescript
const formData = {
  name: 'Empresa ABC',
  email: 'empresa@abc.com',
  phone: '5512345678',
  address: 'Av. JuÃ¡rez #123'
};

const formValidators = {
  name: validators.validateName,
  email: validators.validateEmail,
  phone: validators.validatePhone,
  address: validators.validateAddress,
};

const { isValid, errors } = validators.validateForm(formData, formValidators);

if (isValid) {
  // Enviar formulario
} else {
  console.log('Errores:', errors);
}
```

## ğŸ“ Validadores Disponibles

### Usuarios
- `validateCURP` - CURP mexicano (18 caracteres)
- `validateEmail` - Email vÃ¡lido
- `validatePassword` - ContraseÃ±a segura (12+ chars, mayÃºscula, minÃºscula, nÃºmero, sÃ­mbolo)
- `validateCode` - CÃ³digo de 6 dÃ­gitos
- `validateName` - Nombre (1-255 caracteres)
- `validateGeneralText` - Texto general (1-255 caracteres)
- `validateOptional` - Campo opcional (como biomÃ©trico, mÃ¡ximo 255 caracteres)

### Empresas y Sucursales
- `validatePhone` - TelÃ©fono (10 dÃ­gitos)
- `validateName` - Nombre de empresa/sucursal (1-255 caracteres)
- `validateAddress` - DirecciÃ³n (1-255 caracteres)

### Planos y Checkpoints
- `validateCoordinates` - Coordenadas (nÃºmeros enteros)
- `validateSequence` - Secuencia (nÃºmeros enteros)
- `validateImageUrl` - URL de imagen o Base64

### Patrols y Turnos
- `validatePatrolName` - Tipo de ronda (ronda_matutina, ronda_vespertina, ronda_nocturna)
- `validateFrequency` - Frecuencia (diaria, semanal, mensual)
- `validateShiftName` - Turno (matutino, vespertino, nocturno)
- `validatePatrolStatus` - Estado (completado, pendiente, cancelado, en_progreso)

### Incidentes y Reportes
- `validateIncidentDescription` - DescripciÃ³n (1-255 caracteres)
- `validateIncidentStatus` - Estado (reportado, en_revision, resuelto, descartado)
- `validateIncidentSeverity` - Severidad (baja, media, alta, critica)
- `validateReportType` - Tipo (incidentes, asistencias, general)

## ğŸ¨ CaracterÃ­sticas Visuales

### Errores en Rojo
- **Borde rojo** en campos invÃ¡lidos
- **Texto de error rojo** debajo del campo
- **ValidaciÃ³n en tiempo real** al escribir
- **ValidaciÃ³n al perder foco** (onBlur)

### Ejemplo de Error
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Email                   â”‚ â† Borde rojo
â”‚ usuario@dominio        â”‚
â”‚ Ingrese un email vÃ¡lidoâ”‚ â† Texto rojo
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ Hook Personalizado

```typescript
import { useFieldValidation } from '../utils/validators';

const { error, isValid, handleBlur } = useFieldValidation(
  value, 
  validators.validateEmail,
  true // validar en tiempo real
);
```

## ğŸ“Š Ejemplos de ValidaciÃ³n

### Email
```typescript
// âœ… VÃ¡lido
"usuario@dominio.com"
"admin@empresa.mx"

// âŒ InvÃ¡lido
"usuario@dominio"
"@dominio.com"
"usuario..@dominio.com"
```

### TelÃ©fono
```typescript
// âœ… VÃ¡lido
"5512345678"
"5551234567"

// âŒ InvÃ¡lido
"551234567"  // 9 dÃ­gitos
"55123456789" // 11 dÃ­gitos
"551234567a"  // contiene letra
```

### CURP
```typescript
// âœ… VÃ¡lido
"GODE560427MDFLML09"
"PERE800101HDFXXX01"

// âŒ InvÃ¡lido
"GODE560427MDFLML0"  // 17 caracteres
"GODE560427MDFLML0A" // 19 caracteres
"gode560427mdfml09"  // minÃºsculas
```

## ğŸš€ ImplementaciÃ³n en Componentes Existentes

### Empresas.tsx
```typescript
// Reemplazar TextField por ValidatedTextField
<ValidatedTextField
  label="Nombre de la empresa"
  value={name}
  onChange={(value) => setName(value)}
  validator={validators.validateName}
  fullWidth
  required
/>

<ValidatedTextField
  label="Email"
  value={email}
  onChange={(value) => setEmail(value)}
  validator={validators.validateEmail}
  fullWidth
  required
/>

<ValidatedTextField
  label="TelÃ©fono"
  value={phone}
  onChange={(value) => setPhone(value)}
  validator={validators.validatePhone}
  fullWidth
  required
/>
```

### Sucursales.tsx
```typescript
<ValidatedTextField
  label="Nombre de la sucursal"
  value={name}
  onChange={(value) => setName(value)}
  validator={validators.validateName}
  fullWidth
  required
/>

<ValidatedTextField
  label="DirecciÃ³n"
  value={address}
  onChange={(value) => setAddress(value)}
  validator={validators.validateAddress}
  fullWidth
  required
/>
```

## ğŸ¯ Beneficios

1. **ValidaciÃ³n en tiempo real** - Los errores aparecen mientras escribes
2. **Feedback visual claro** - Errores en rojo, fÃ¡cil de identificar
3. **Consistencia** - Mismos validadores en toda la aplicaciÃ³n
4. **Mantenibilidad** - Un solo lugar para cambiar validaciones
5. **UX mejorada** - Usuarios saben inmediatamente si hay errores

## ğŸ”„ PrÃ³ximos Pasos

1. **Implementar en Empresas.tsx** - Reemplazar TextFields
2. **Implementar en Sucursales.tsx** - Reemplazar TextFields
3. **Implementar en Usuarios.tsx** - Agregar validaciones de CURP, email, etc.
4. **Crear validadores para otros formularios** - SegÃºn sea necesario 