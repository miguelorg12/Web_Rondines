# Validadores de Formularios - RondiTrack

## 📋 Descripción

Este archivo contiene validadores basados en expresiones regulares para todos los formularios de RondiTrack. Los validadores muestran errores en **rojo** y validan en tiempo real.

## 🚀 Uso Básico

### 1. Importar los validadores

```typescript
import { validators } from '../utils/validators';
```

### 2. Usar ValidatedTextField

```typescript
import ValidatedTextField from '../components/common/ValidatedTextField';

// En tu componente
<ValidatedTextField
  label="Email"
  value={email}
  onChange={(value) => setEmail(value)}
  validator={validators.validateEmail}
  fullWidth
  required
/>
```

### 3. Validar formulario completo

```typescript
const formData = {
  name: 'Empresa ABC',
  email: 'empresa@abc.com',
  phone: '5512345678',
  address: 'Av. Juárez #123'
};

const formValidators = {
  name: validators.validateName,
  email: validators.validateEmail,
  phone: validators.validatePhone,
  address: validators.validateAddress,
};

const { isValid, errors } = validators.validateForm(formData, formValidators);

if (isValid) {
  // Enviar formulario
} else {
  console.log('Errores:', errors);
}
```

## 📝 Validadores Disponibles

### Usuarios
- `validateCURP` - CURP mexicano (18 caracteres)
- `validateEmail` - Email válido
- `validatePassword` - Contraseña segura (12+ chars, mayúscula, minúscula, número, símbolo)
- `validateCode` - Código de 6 dígitos
- `validateName` - Nombre (1-255 caracteres)
- `validateGeneralText` - Texto general (1-255 caracteres)
- `validateOptional` - Campo opcional (como biométrico, máximo 255 caracteres)

### Empresas y Sucursales
- `validatePhone` - Teléfono (10 dígitos)
- `validateName` - Nombre de empresa/sucursal (1-255 caracteres)
- `validateAddress` - Dirección (1-255 caracteres)

### Planos y Checkpoints
- `validateCoordinates` - Coordenadas (números enteros)
- `validateSequence` - Secuencia (números enteros)
- `validateImageUrl` - URL de imagen o Base64

### Patrols y Turnos
- `validatePatrolName` - Tipo de ronda (ronda_matutina, ronda_vespertina, ronda_nocturna)
- `validateFrequency` - Frecuencia (diaria, semanal, mensual)
- `validateShiftName` - Turno (matutino, vespertino, nocturno)
- `validatePatrolStatus` - Estado (completado, pendiente, cancelado, en_progreso)

### Incidentes y Reportes
- `validateIncidentDescription` - Descripción (1-255 caracteres)
- `validateIncidentStatus` - Estado (reportado, en_revision, resuelto, descartado)
- `validateIncidentSeverity` - Severidad (baja, media, alta, critica)
- `validateReportType` - Tipo (incidentes, asistencias, general)

## 🎨 Características Visuales

### Errores en Rojo
- **Borde rojo** en campos inválidos
- **Texto de error rojo** debajo del campo
- **Validación en tiempo real** al escribir
- **Validación al perder foco** (onBlur)

### Ejemplo de Error
```
┌─────────────────────────┐
│ Email                   │ ← Borde rojo
│ usuario@dominio        │
│ Ingrese un email válido│ ← Texto rojo
└─────────────────────────┘
```

## 🔧 Hook Personalizado

```typescript
import { useFieldValidation } from '../utils/validators';

const { error, isValid, handleBlur } = useFieldValidation(
  value, 
  validators.validateEmail,
  true // validar en tiempo real
);
```

## 📊 Ejemplos de Validación

### Email
```typescript
// ✅ Válido
"usuario@dominio.com"
"admin@empresa.mx"

// ❌ Inválido
"usuario@dominio"
"@dominio.com"
"usuario..@dominio.com"
```

### Teléfono
```typescript
// ✅ Válido
"5512345678"
"5551234567"

// ❌ Inválido
"551234567"  // 9 dígitos
"55123456789" // 11 dígitos
"551234567a"  // contiene letra
```

### CURP
```typescript
// ✅ Válido
"GODE560427MDFLML09"
"PERE800101HDFXXX01"

// ❌ Inválido
"GODE560427MDFLML0"  // 17 caracteres
"GODE560427MDFLML0A" // 19 caracteres
"gode560427mdfml09"  // minúsculas
```

## 🚀 Implementación en Componentes Existentes

### Empresas.tsx
```typescript
// Reemplazar TextField por ValidatedTextField
<ValidatedTextField
  label="Nombre de la empresa"
  value={name}
  onChange={(value) => setName(value)}
  validator={validators.validateName}
  fullWidth
  required
/>

<ValidatedTextField
  label="Email"
  value={email}
  onChange={(value) => setEmail(value)}
  validator={validators.validateEmail}
  fullWidth
  required
/>

<ValidatedTextField
  label="Teléfono"
  value={phone}
  onChange={(value) => setPhone(value)}
  validator={validators.validatePhone}
  fullWidth
  required
/>
```

### Sucursales.tsx
```typescript
<ValidatedTextField
  label="Nombre de la sucursal"
  value={name}
  onChange={(value) => setName(value)}
  validator={validators.validateName}
  fullWidth
  required
/>

<ValidatedTextField
  label="Dirección"
  value={address}
  onChange={(value) => setAddress(value)}
  validator={validators.validateAddress}
  fullWidth
  required
/>
```

## 🎯 Beneficios

1. **Validación en tiempo real** - Los errores aparecen mientras escribes
2. **Feedback visual claro** - Errores en rojo, fácil de identificar
3. **Consistencia** - Mismos validadores en toda la aplicación
4. **Mantenibilidad** - Un solo lugar para cambiar validaciones
5. **UX mejorada** - Usuarios saben inmediatamente si hay errores

## 🔄 Próximos Pasos

1. **Implementar en Empresas.tsx** - Reemplazar TextFields
2. **Implementar en Sucursales.tsx** - Reemplazar TextFields
3. **Implementar en Usuarios.tsx** - Agregar validaciones de CURP, email, etc.
4. **Crear validadores para otros formularios** - Según sea necesario 